name: programs
relations:
- name: owner

# Program viewers are allowed if they have a 'view' permission, are an 'editor', or
# have 'view' on the parent relation (e.g. portfolio).
- name: viewer
  rewrite:
    union:
      - _this: {}
      - computed_userset:
          relation: editor
      - tuple_to_userset:
          tupleset:
            relation: parent
          computed_userset:
            relation: view

# Program editors or owners of a program are allowed to edit a program.
- name: editor
  rewrite:
    union:
      - _this: {}
      - computed_userset:
          relation: owner