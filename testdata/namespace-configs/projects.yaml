name: projects
relations:
- name: owner

# Project viewers are allowed if they have a 'viewer' permission, are an 'editor', or
# have 'viewer' on the parent relation (e.g. program or portfolio).
- name: viewer
  rewrite:
    union:
      - _this: {}
      - computed_userset:
          relation: editor
      - tuple_to_userset:
          tupleset:
            relation: parent
          computed_userset:
            relation: viewer

# Project editors or owners of a project are allowed to edit a project.
- name: editor
  rewrite:
    union:
      - _this: {}
      - intersection:
        - computed_userset:
            relation: owner
        - _this: {}



